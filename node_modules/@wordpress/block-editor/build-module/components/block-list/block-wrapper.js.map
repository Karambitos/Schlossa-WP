{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block-wrapper.js"],"names":["classnames","first","last","omit","useRef","useEffect","useState","useContext","forwardRef","focus","isTextField","placeCaretAtHorizontalEdge","ENTER","BACKSPACE","DELETE","__","sprintf","useSelect","useDispatch","isInsideRootBlock","useMovingAnimation","Context","SetBlockNodes","BlockListBlockContext","ELEMENTS","BlockComponent","wrapper","children","tagName","TagName","__unstableIsHtml","props","onSelectionStart","setBlockNodes","clientId","rootClientId","isSelected","isFirstMultiSelected","isLastMultiSelected","isPartOfMultiSelection","enableAnimation","index","className","name","mode","blockTitle","wrapperProps","select","getSelectedBlocksInitialCaretPosition","_isMultiSelecting","isMultiSelecting","_isNavigationMode","isNavigationMode","shouldFocusFirstElement","initialPosition","undefined","insertDefaultBlock","removeBlock","fallbackRef","isAligned","isHovered","setHovered","node","current","nodes","blockLabel","focusTabbable","document","activeElement","textInputs","tabbable","find","filter","closest","isReverse","target","onKeyDown","event","keyCode","preventDefault","onMouseLeave","which","buttons","htmlSuffix","blockElementId","onMouseOver","defaultPrevented","onMouseOut","style","ExtendedBlockComponent","reduce","acc","element","ref","Block"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { first, last, omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseEffect,\n\tuseState,\n\tuseContext,\n\tforwardRef,\n} from '@wordpress/element';\nimport { focus, isTextField, placeCaretAtHorizontalEdge } from '@wordpress/dom';\nimport { ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { isInsideRootBlock } from '../../utils/dom';\nimport useMovingAnimation from '../use-moving-animation';\nimport { Context, SetBlockNodes } from './root-container';\nimport { BlockListBlockContext } from './block';\nimport ELEMENTS from './block-wrapper-elements';\n\nconst BlockComponent = forwardRef(\n\t(\n\t\t{ children, tagName: TagName = 'div', __unstableIsHtml, ...props },\n\t\twrapper\n\t) => {\n\t\tconst onSelectionStart = useContext( Context );\n\t\tconst setBlockNodes = useContext( SetBlockNodes );\n\t\tconst {\n\t\t\tclientId,\n\t\t\trootClientId,\n\t\t\tisSelected,\n\t\t\tisFirstMultiSelected,\n\t\t\tisLastMultiSelected,\n\t\t\tisPartOfMultiSelection,\n\t\t\tenableAnimation,\n\t\t\tindex,\n\t\t\tclassName,\n\t\t\tname,\n\t\t\tmode,\n\t\t\tblockTitle,\n\t\t\twrapperProps,\n\t\t} = useContext( BlockListBlockContext );\n\t\tconst {\n\t\t\tinitialPosition,\n\t\t\tshouldFocusFirstElement,\n\t\t\tisNavigationMode,\n\t\t} = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\t\t\tisMultiSelecting: _isMultiSelecting,\n\t\t\t\t\tisNavigationMode: _isNavigationMode,\n\t\t\t\t} = select( 'core/block-editor' );\n\n\t\t\t\treturn {\n\t\t\t\t\tshouldFocusFirstElement:\n\t\t\t\t\t\tisSelected &&\n\t\t\t\t\t\t! _isMultiSelecting() &&\n\t\t\t\t\t\t! _isNavigationMode(),\n\t\t\t\t\tinitialPosition: isSelected\n\t\t\t\t\t\t? getSelectedBlocksInitialCaretPosition()\n\t\t\t\t\t\t: undefined,\n\t\t\t\t\tisNavigationMode: _isNavigationMode,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ isSelected ]\n\t\t);\n\t\tconst { insertDefaultBlock, removeBlock } = useDispatch(\n\t\t\t'core/block-editor'\n\t\t);\n\t\tconst fallbackRef = useRef();\n\t\tconst isAligned = wrapperProps && !! wrapperProps[ 'data-align' ];\n\t\twrapper = wrapper || fallbackRef;\n\n\t\tconst [ isHovered, setHovered ] = useState( false );\n\n\t\t// Provide the selected node, or the first and last nodes of a multi-\n\t\t// selection, so it can be used to position the contextual block toolbar.\n\t\t// We only provide what is necessary, and remove the nodes again when they\n\t\t// are no longer selected.\n\t\tuseEffect( () => {\n\t\t\tif ( isSelected || isFirstMultiSelected || isLastMultiSelected ) {\n\t\t\t\tconst node = wrapper.current;\n\t\t\t\tsetBlockNodes( ( nodes ) => ( {\n\t\t\t\t\t...nodes,\n\t\t\t\t\t[ clientId ]: node,\n\t\t\t\t} ) );\n\t\t\t\treturn () => {\n\t\t\t\t\tsetBlockNodes( ( nodes ) => omit( nodes, clientId ) );\n\t\t\t\t};\n\t\t\t}\n\t\t}, [ isSelected, isFirstMultiSelected, isLastMultiSelected ] );\n\n\t\t// translators: %s: Type of block (i.e. Text, Image etc)\n\t\tconst blockLabel = sprintf( __( 'Block: %s' ), blockTitle );\n\n\t\t// Handing the focus of the block on creation and update\n\n\t\t/**\n\t\t * When a block becomes selected, transition focus to an inner tabbable.\n\t\t */\n\t\tconst focusTabbable = () => {\n\t\t\t// Focus is captured by the wrapper node, so while focus transition\n\t\t\t// should only consider tabbables within editable display, since it\n\t\t\t// may be the wrapper itself or a side control which triggered the\n\t\t\t// focus event, don't unnecessary transition to an inner tabbable.\n\t\t\tif (\n\t\t\t\tdocument.activeElement &&\n\t\t\t\tisInsideRootBlock( wrapper.current, document.activeElement )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Find all tabbables within node.\n\t\t\tconst textInputs = focus.tabbable\n\t\t\t\t.find( wrapper.current )\n\t\t\t\t.filter( isTextField )\n\t\t\t\t// Exclude inner blocks and block appenders\n\t\t\t\t.filter(\n\t\t\t\t\t( node ) =>\n\t\t\t\t\t\tisInsideRootBlock( wrapper.current, node ) &&\n\t\t\t\t\t\t! node.closest( '.block-list-appender' )\n\t\t\t\t);\n\n\t\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t\t// tabbables.\n\t\t\tconst isReverse = -1 === initialPosition;\n\t\t\tconst target =\n\t\t\t\t( isReverse ? last : first )( textInputs ) || wrapper.current;\n\n\t\t\tplaceCaretAtHorizontalEdge( target, isReverse );\n\t\t};\n\n\t\tuseEffect( () => {\n\t\t\tif ( shouldFocusFirstElement ) {\n\t\t\t\tfocusTabbable();\n\t\t\t}\n\t\t}, [ shouldFocusFirstElement ] );\n\n\t\t// Block Reordering animation\n\t\tuseMovingAnimation(\n\t\t\twrapper,\n\t\t\tisSelected || isPartOfMultiSelection,\n\t\t\tisSelected || isFirstMultiSelected,\n\t\t\tenableAnimation,\n\t\t\tindex\n\t\t);\n\n\t\t/**\n\t\t * Interprets keydown event intent to remove or insert after block if key\n\t\t * event occurs on wrapper node. This can occur when the block has no text\n\t\t * fields of its own, particularly after initial insertion, to allow for\n\t\t * easy deletion and continuous writing flow to add additional content.\n\t\t *\n\t\t * @param {KeyboardEvent} event Keydown event.\n\t\t */\n\t\tconst onKeyDown = ( event ) => {\n\t\t\tconst { keyCode, target } = event;\n\n\t\t\tif ( props.onKeyDown ) {\n\t\t\t\tprops.onKeyDown( event );\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tkeyCode !== ENTER &&\n\t\t\t\tkeyCode !== BACKSPACE &&\n\t\t\t\tkeyCode !== DELETE\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( target !== wrapper.current || isTextField( target ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( keyCode === ENTER ) {\n\t\t\t\tinsertDefaultBlock( {}, rootClientId, index + 1 );\n\t\t\t} else {\n\t\t\t\tremoveBlock( clientId );\n\t\t\t}\n\t\t};\n\n\t\tconst onMouseLeave = ( { which, buttons } ) => {\n\t\t\t// The primary button must be pressed to initiate selection. Fall back\n\t\t\t// to `which` if the standard `buttons` property is falsy. There are\n\t\t\t// cases where Firefox might always set `buttons` to `0`.\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\t\t\tif ( ( buttons || which ) === 1 ) {\n\t\t\t\tonSelectionStart( clientId );\n\t\t\t}\n\t\t};\n\n\t\tconst htmlSuffix =\n\t\t\tmode === 'html' && ! __unstableIsHtml ? '-visual' : '';\n\t\tconst blockElementId = `block-${ clientId }${ htmlSuffix }`;\n\n\t\tfunction onMouseOver( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( isHovered ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetHovered( true );\n\t\t}\n\n\t\tfunction onMouseOut( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( ! isHovered ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetHovered( false );\n\t\t}\n\n\t\treturn (\n\t\t\t// eslint-disable-next-line jsx-a11y/mouse-events-have-key-events\n\t\t\t<TagName\n\t\t\t\t// Overrideable props.\n\t\t\t\taria-label={ blockLabel }\n\t\t\t\trole=\"group\"\n\t\t\t\t{ ...omit( wrapperProps, [ 'data-align' ] ) }\n\t\t\t\t{ ...props }\n\t\t\t\tid={ blockElementId }\n\t\t\t\tref={ wrapper }\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\tclassName,\n\t\t\t\t\tprops.className,\n\t\t\t\t\twrapperProps && wrapperProps.className,\n\t\t\t\t\t{\n\t\t\t\t\t\t'is-hovered': isHovered,\n\t\t\t\t\t\t'wp-block': ! isAligned,\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t\tdata-block={ clientId }\n\t\t\t\tdata-type={ name }\n\t\t\t\tdata-title={ blockTitle }\n\t\t\t\t// Only allow shortcuts when a blocks is selected.\n\t\t\t\tonKeyDown={ isSelected ? onKeyDown : undefined }\n\t\t\t\t// Only allow selection to be started from a selected block.\n\t\t\t\tonMouseLeave={ isSelected ? onMouseLeave : undefined }\n\t\t\t\t// No need to have these listeners for hover class in edit mode.\n\t\t\t\tonMouseOver={ isNavigationMode ? onMouseOver : undefined }\n\t\t\t\tonMouseOut={ isNavigationMode ? onMouseOut : undefined }\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\tstyle={ {\n\t\t\t\t\t...( wrapperProps ? wrapperProps.style : {} ),\n\t\t\t\t\t...( props.style || {} ),\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</TagName>\n\t\t);\n\t}\n);\n\nconst ExtendedBlockComponent = ELEMENTS.reduce( ( acc, element ) => {\n\tacc[ element ] = forwardRef( ( props, ref ) => {\n\t\treturn <BlockComponent { ...props } ref={ ref } tagName={ element } />;\n\t} );\n\treturn acc;\n}, BlockComponent );\n\nexport const Block = ExtendedBlockComponent;\n"]}